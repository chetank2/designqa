# Figma Web Comparison Tool - Environment Configuration

# Server Configuration
PORT=3847
SERVER_HOST=localhost

# Figma API
FIGMA_API_KEY=your_figma_personal_access_token_here
FIGMA_CONNECTION_MODE=desktop  # options: api, desktop, figma
# FIGMA_DESKTOP_MCP_URL=http://127.0.0.1:3845/mcp
# FIGMA_MCP_URL=https://mcp.figma.com/mcp

# MCP Configuration
MCP_ENABLED=true
MCP_URL=http://127.0.0.1:3845
MCP_ENDPOINT=/mcp

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:3847,http://localhost:5173
CORS_CREDENTIALS=true

# Puppeteer Configuration
PUPPETEER_HEADLESS=new
PUPPETEER_TIMEOUT=30000
PUPPETEER_PROTOCOL_TIMEOUT=60000
# PUPPETEER_EXECUTABLE_PATH=/Applications/Google Chrome.app/Contents/MacOS/Google Chrome
# PUPPETEER_ARGS=--no-sandbox,--disable-setuid-sandbox

# Comparison Thresholds
COLOR_DIFFERENCE_THRESHOLD=10
SIZE_DIFFERENCE_THRESHOLD=5
SPACING_DIFFERENCE_THRESHOLD=3
FONT_SIZE_DIFFERENCE_THRESHOLD=2

# Timeouts (in milliseconds)
FIGMA_EXTRACTION_TIMEOUT=60000
WEB_EXTRACTION_TIMEOUT=30000
COMPARISON_TIMEOUT=10000

# Security Configuration
# ALLOWED_HOSTS=example.com,demo.aftercrop.in
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX=100           # requests per window
RATE_LIMIT_EXTRACTION_MAX=10 # extraction requests per window

# Database Configuration
# For local desktop mode (SQLite):
DATABASE_URL=file:./data/app.db
# For SaaS mode (Supabase):
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_SERVICE_KEY=xxx
# SUPABASE_ANON_KEY=xxx

# Frontend Build Configuration (Vite)
# IMPORTANT: Vite only reads variables from frontend/.env at build time
# These VITE_ prefixed variables MUST be in frontend/.env for the build to work
# Run 'npm run sync:env' to automatically sync VITE_ vars from root .env to frontend/.env
# VITE_SUPABASE_URL=https://xxx.supabase.co
# VITE_SUPABASE_ANON_KEY=xxx

# Deployment Mode (auto-detected if not set)
# DEPLOYMENT_MODE=local|saas

# Credential Encryption Key (required for credential storage)
# CREDENTIAL_ENCRYPTION_KEY=your-secure-encryption-key-here
# LOCAL_CREDENTIAL_KEY=your-local-encryption-key-here

# Development
NODE_ENV=development 
